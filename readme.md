# 密码锁

    这是我们专业这学期＂单片机实习＂的一个题目的源代码．

## 设计要求
　　　1、密码存储在I2C器件中，实现密码掉电不丢失。

　　　2、电路板在上电后四个数码管显示“—”。

　　　3、实现数字键0-9和功能键的设计， 

　　　4、四个功能键的说明：

　　（1）密码的输入键：按下此键时，屏幕（四个数码管）空白显示（全黑），按下数字键输入原来密码，每输入一个数字，相应的数码管显示“—”。若输入不正确，屏幕（四个数码管）显示“HHHH”。若输入正确后，显示“8888”

　　（2）退出键：密码的输入后，按下此键表示退出，屏幕（四个数码管）显示“—”。

　　（3）密码修改键：按下此键时，屏幕（四个数码管）空白显示（全黑），按下数字键输入原来密码，每输入一个数字，相应的数码管显示输入的数字，若输入正确后，屏幕（四个数码管）显示“8888”。按下数字键输入新的密码，四个数码管清空显示（全黑），每输入一个数字，相应的数码管显示输入的数字。如果放弃修改，按退出键放弃保存，进入状态2。

    （4）修改确认键：当密码密码修改键按下，若输入密码正确后，按下此键时，将修改的密码进行存储。
    
## 工程介绍
    这次的设计使用了一片STC89C52单片机，使用AT24C02--EEPROM存储密码,四位共阳数码管，4X4矩阵键盘，MAX232串口电路作为程序下载电路。
    我还使用了蜂鸣器做了一个小拓展。

    编译器使用开源的SDCC为8051编译代码，使用Eclipse +　CDT +
    SDCC插件管理工程，你也可以自己写Makefile来编译这个工程。

    程序文件如下：

    |-- config.h      //与CPU有关的配置
    |-- iic2402.c     //AT24C02的驱动程序
    |-- iic2402.h
    |-- iic.c         // 51单片机使用IO口模拟IIC协议函数
    |-- iic.h
    |-- key.c         //扫描键盘的函数
    |-- key.h
    |-- main.c        //主要功能实现代码
    |-- Port.h        //与引脚相关的一些定义
    
## 最后结果
    最终我的程序实现了所有的设计要求，并且，自己添加了一些小的功能，比如在正确输入密码之后，会有两声短促的蜂鸣声，如果密码错误则是一声比较长的蜂鸣声。
    还有，我在EEPROM中保存密码的时候，使用了简单的移位加密，这样使得就算EEPROM里面的数据被其他非正常手段读取了，也不会获得正确的密码。
